<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <!-- Begin LozyeFramework.WebEngine SEO tag v2.6.1 -->
<title>手机手势监听 | Lozye</title>
<meta name="generator" content="LozyeFramework.WebEngine v1.0.0" />
<meta property="og:title" content="手机手势监听" />
<meta property="og:locale" content="cn_ZH" />
<meta name="description" content="手机网页手势动作监听" />
<meta property="og:description" content="手机网页手势动作监听" />
<link rel="canonical" href="https://lozye.github.io/doc/movejs.html?v=132466890336004518" />
<meta property="og:url" content="https://lozye.github.io/doc/movejs.html?v=132466890336004518" />
<meta property="og:site_name" content="Lozye" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-08" />
<script type="application/ld+json">{"headline":"手机手势监听","dateModified":"2020-10-09T11:50:33+08:00","datePublished":"2020-10-09T11:50:33+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://lozye.github.io/doc/movejs.html?v=132466890336004518"},"url":"https://lozye.github.io/doc/movejs.html?v=132466890336004518","description":"手机网页手势动作监听","@context":"https://schema.org"}</script>
<!-- End LozyeFramework.WebEngine SEO tag -->
    <link href="https://lozye.github.io/assets/css/web.all.css?v=132466890336004518" rel="stylesheet" />

    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

</head>

<body>
    <div class="x-wapper">
        <div class="x-site">
            <div class="x-site-top"></div>
            <div class="x-site-mid"></div>
            <div class="x-site-footer">
                <p class="x-site-title"><a href="https://lozye.github.io/index.html?v=132466890336004518">Lozye</a></p>
                <p class="x-site-slogan"><a>身处黑夜，心向黎明！</a></p>
                <p class="x-site-slogan"><a href="https://lozye.github.io/list.html?v=132466890336004518">全部文章</a></p>
            </div>
            <div class="x-site-hidden">
                <p><a href="http://www.beian.miit.gov.cn/" target="_blank"></a></p>
                <p></p>
            </div>
        </div>
        <div class="x-main">
            <div class="x-container">
                <div class="x-box grid-box">
                    <div class="grid-box x-box-header">
                        <div class="x-box-title grid-box">手机手势监听</div>
                        <div class="x-box-date grid-box">2020-10-08</div>
                    </div>
                    <div class="grid-box x-box-markdown markdown-body"> <h2 id="0x1-摘要">0X1 摘要</h2>
<p>手机网页手势动作监听</p>
<h2 id="0x2-使用">0X2 使用</h2>
<p>通过监听 <code>right</code>、<code>left</code>、<code>up</code>、<code>down</code> 来执行对应的方法</p>
<pre><code class="language-js">moveJS.on(<span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{alert(<span class="hljs-string">&quot;right&quot;</span>);});
moveJS.on(<span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{alert(<span class="hljs-string">&quot;left&quot;</span>);});</code></pre>
<h2 id="0x3-源码">0X3 源码</h2>
<p><a href="https://github.com/lozye/lozye.github.io/blob/master/opensource/moveJS.js">源</a></p>
<pre><code class="language-js"><span class="hljs-comment">//手机页面滑动监听</span>
<span class="hljs-keyword">var</span> moveJS = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{    
    <span class="hljs-keyword">var</span> m_lintened = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> f_default = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{ },
        f_up = f_default,
        f_down = f_default,
        f_left = f_default,
        f_right = f_default;
    <span class="hljs-comment">//监听动作</span>
    <span class="hljs-keyword">var</span> listen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method, fn</span>) </span>{
        <span class="hljs-keyword">var</span> fn = fn || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{ };
        <span class="hljs-keyword">switch</span> (method) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;up&quot;</span>: f_up= fn; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;down&quot;</span>: f_down = fn; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;left&quot;</span>: f_left = fn; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;right&quot;</span>: f_right = fn; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (m_lintened) <span class="hljs-keyword">return</span>;
        m_lintened = <span class="hljs-literal">true</span>;
        mouseSrcoll();       
    }
    <span class="hljs-comment">//开始监听</span>
    <span class="hljs-keyword">var</span> mouseSrcoll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        m_touch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">if</span> (e.spend &lt; <span class="hljs-number">25</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-comment">// left</span>
            <span class="hljs-keyword">if</span> (e.x &lt; <span class="hljs-number">-50</span> &amp;&amp; <span class="hljs-built_in">Math</span>.abs(e.y) &lt; <span class="hljs-number">50</span>) { f_left(e); }
            <span class="hljs-comment">// rigth</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.x &gt; <span class="hljs-number">50</span> &amp;&amp; <span class="hljs-built_in">Math</span>.abs(e.y) &lt; <span class="hljs-number">50</span>) { f_right(e); }
            <span class="hljs-comment">// up</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.y &lt; <span class="hljs-number">-100</span> ) { f_up(e); }
            <span class="hljs-comment">// down</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.y &gt; <span class="hljs-number">100</span>) { f_down(e); }   
        });
    }
    <span class="hljs-comment">//拖到参数</span>
    <span class="hljs-keyword">var</span> m_touch = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
        <span class="hljs-keyword">var</span> fn = fn || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ };
        <span class="hljs-keyword">var</span> m_temp = {};
        <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;touchstart&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">var</span> touch = e.touches[<span class="hljs-number">0</span>];
            m_temp.x = touch.pageX;
            m_temp.y = touch.pageY;
            m_temp.t = e.timeStamp;
        }, <span class="hljs-literal">false</span>);
        <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;touchend&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">var</span> touch = e.changedTouches[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">var</span> move = { <span class="hljs-string">&quot;x&quot;</span>: touch.pageX - m_temp.x, <span class="hljs-string">&quot;y&quot;</span>: touch.pageY - m_temp.y, <span class="hljs-string">&quot;spend&quot;</span>: <span class="hljs-built_in">parseInt</span>(e.timeStamp - m_temp.t) };
            fn(move);
        }, <span class="hljs-literal">false</span>);
    }  
    <span class="hljs-keyword">return</span> { <span class="hljs-string">&quot;on&quot;</span>: listen }
})()</code></pre>
 </div>
                    <div class="grid-box x-box-footer">
                        <div class="x-box-line">
                            <div class="grid-box x-box-left">
                                <ul>
                                    
                                    <li><a href="https://lozye.github.io/list.html#js?v=132466890336004518">js</a> </li>
                                    
                                    <li><a href="https://lozye.github.io/list.html#手势?v=132466890336004518">手势</a> </li>
                                    
                                    <li><a href="https://lozye.github.io/list.html#手机?v=132466890336004518">手机</a> </li>
                                    
                                </ul>
                                &nbsp;
                            </div>
                            <div class="grid-box x-box-right">
                                <a href="https://lozye.github.io/list.html?v=132466890336004518">BACK</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="x-footer">
                <div class="x-footer-msg x-noselect grid-box">
                    <ul>
                        <li>
                            <span>
                                product by
                                <a href="https://github.com/lozye" target="_blank">@Lozye</a>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="x-hidden"></div>
    </div>
</body>

</html>