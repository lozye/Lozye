<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <!-- Begin LozyeFramework.WebEngine SEO tag v2.6.1 -->
<title>NET 移位 | Lozye</title>
<meta name="generator" content="LozyeFramework.WebEngine v1.0.0" />
<meta property="og:title" content="NET 移位" />
<meta property="og:locale" content="cn_ZH" />
<meta name="description" content=".NET 移位运算符在数学应用场景下的说明" />
<meta property="og:description" content=".NET 移位运算符在数学应用场景下的说明" />
<link rel="canonical" href="https://lozye.github.io/post/2018-09-13/2018-09-13-dotnet-shift.html?v=132466890336004518" />
<meta property="og:url" content="https://lozye.github.io/post/2018-09-13/2018-09-13-dotnet-shift.html?v=132466890336004518" />
<meta property="og:site_name" content="Lozye" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-13" />
<script type="application/ld+json">{"headline":"NET 移位","dateModified":"2020-10-09T11:50:33+08:00","datePublished":"2020-10-09T11:50:33+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://lozye.github.io/post/2018-09-13/2018-09-13-dotnet-shift.html?v=132466890336004518"},"url":"https://lozye.github.io/post/2018-09-13/2018-09-13-dotnet-shift.html?v=132466890336004518","description":".NET 移位运算符在数学应用场景下的说明","@context":"https://schema.org"}</script>
<!-- End LozyeFramework.WebEngine SEO tag -->
    <link href="https://lozye.github.io/assets/css/web.all.css?v=132466890336004518" rel="stylesheet" />

    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

</head>

<body>
    <div class="x-wapper">
        <div class="x-site">
            <div class="x-site-top"></div>
            <div class="x-site-mid"></div>
            <div class="x-site-footer">
                <p class="x-site-title"><a href="https://lozye.github.io/index.html?v=132466890336004518">Lozye</a></p>
                <p class="x-site-slogan"><a>身处黑夜，心向黎明！</a></p>
                <p class="x-site-slogan"><a href="https://lozye.github.io/list.html?v=132466890336004518">全部文章</a></p>
            </div>
            <div class="x-site-hidden">
                <p><a href="http://www.beian.miit.gov.cn/" target="_blank"></a></p>
                <p></p>
            </div>
        </div>
        <div class="x-main">
            <div class="x-container">
                <div class="x-box grid-box">
                    <div class="grid-box x-box-header">
                        <div class="x-box-title grid-box">NET 移位</div>
                        <div class="x-box-date grid-box">2018-09-13</div>
                    </div>
                    <div class="grid-box x-box-markdown markdown-body"> <h2 id="0x1-摘要">0X1 摘要</h2>
<p>.NET 移位运算符在数学应用场景下的说明</p>
<h2 id="0x2-移位运算符">0X2 移位运算符</h2>
<blockquote>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/">MS Docs</a></p>
</blockquote>
<h2 id="0x3--运算符">0X3 &lt;&lt; 运算符</h2>
<blockquote>
<p>左移运算符 (<code>&lt;&lt;</code>) 将第一个操作数向左移动第二个操作数指定的位数。</p>
</blockquote>
<p>所有移位都和2的多少次幂有关系，所以pow（幂）也有了范围比如 <code>int.MaxValue=2^32</code> 所以int下pow的范围是[0-31]</p>
<ul>
<li>转换为乘法<pre><code class="language-c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shiftRight</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> pow</span>)</span>
{
  <span class="hljs-keyword">int</span> c = (<span class="hljs-keyword">int</span>)Math.Pow(<span class="hljs-number">2</span>, pow);
  <span class="hljs-keyword">int</span> a = x * c;
  <span class="hljs-keyword">int</span> b = x &lt;&lt; pow;
  System.Diagnostics.Debug.Assert(a == b);
}</code></pre>
可以得出 <code>(x &lt;&lt; pow)==(x*(int)Math.Pow(2, pow))</code></li>
</ul>
<p>##0X3 &gt;&gt; 运算符</p>
<blockquote>
<p>右移运算符 (<code>&gt;&gt;</code>) 将第一个操作数向右移动第二个操作数指定的位数。</p>
</blockquote>
<ul>
<li>转换为除法<pre><code class="language-c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shilfLeft</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> pow</span>)</span>
{
  <span class="hljs-keyword">int</span> c = (<span class="hljs-keyword">int</span>)Math.Pow(<span class="hljs-number">2</span>, pow);
  <span class="hljs-keyword">int</span> a = x / c;
  <span class="hljs-keyword">int</span> b = x &gt;&gt; pow;
  System.Diagnostics.Debug.Assert(a == b);
}</code></pre>
可以得出 <code>(x &gt;&gt; pow)==(x/(int)Math.Pow(2, pow))</code></li>
</ul>
<h2 id="0x4--运算符">0X4 &amp; 运算符</h2>
<blockquote>
<p>对于整型类型，<code>&amp;</code> 计算其操作数的逻辑按位 AND</p>
</blockquote>
<p>对于整数类型可以理解为求余数，但是底数必须是(2^pow)</p>
<ul>
<li>转换为求余<pre><code class="language-c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shiftAnd</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> pow</span>)</span>
{
  <span class="hljs-keyword">int</span> c = (<span class="hljs-keyword">int</span>)Math.Pow(<span class="hljs-number">2</span>, pow);
  <span class="hljs-keyword">int</span> a = x % c;
  <span class="hljs-keyword">int</span> b = x &amp; (c - <span class="hljs-number">1</span>);
  System.Diagnostics.Debug.Assert(a == b);
}</code></pre>
当底数为<code>c=(2^pow)</code>时，<code>( x % c)=( x &amp; (c-1))</code></li>
</ul>
<h2 id="0x5--运算符">0X5 ^ 运算符</h2>
<p>...</p>
<h2 id="0x6--运算符">0X6 | 运算符</h2>
<p>....</p>
 </div>
                    <div class="grid-box x-box-footer">
                        <div class="x-box-line">
                            <div class="grid-box x-box-left">
                                <ul>
                                    
                                    <li><a href="https://lozye.github.io/list.html#c#?v=132466890336004518">c#</a> </li>
                                    
                                    <li><a href="https://lozye.github.io/list.html#cshape?v=132466890336004518">cshape</a> </li>
                                    
                                </ul>
                                &nbsp;
                            </div>
                            <div class="grid-box x-box-right">
                                <a href="https://lozye.github.io/list.html?v=132466890336004518">BACK</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="x-footer">
                <div class="x-footer-msg x-noselect grid-box">
                    <ul>
                        <li>
                            <span>
                                product by
                                <a href="https://github.com/lozye" target="_blank">@Lozye</a>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="x-hidden"></div>
    </div>
</body>

</html>