<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
	<!-- Begin LozyeFramework.WebEngine SEO tag v2.6.1 -->
<title>HEX Convert | Lozye</title>
<meta name="generator" content="LozyeFramework.WebEngine v1.0.0" />
<meta property="og:title" content="HEX Convert" />
<meta property="og:locale" content="cn_ZH" />
<meta name="description" content="string convert-to hex and hex convert-to string" />
<meta property="og:description" content="string convert-to hex and hex convert-to string" />
<link rel="canonical" href="https://lozye.github.io/post/2018-09-12/2018-09-12-hex-convert.html?v=132484243179996977" />
<meta property="og:url" content="https://lozye.github.io/post/2018-09-12/2018-09-12-hex-convert.html?v=132484243179996977" />
<meta property="og:site_name" content="Lozye" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-12" />
<script type="application/ld+json">{"headline":"HEX Convert","dateModified":"2020-10-29T13:51:57+08:00","datePublished":"2020-10-29T13:51:57+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://lozye.github.io/post/2018-09-12/2018-09-12-hex-convert.html?v=132484243179996977"},"url":"https://lozye.github.io/post/2018-09-12/2018-09-12-hex-convert.html?v=132484243179996977","description":"string convert-to hex and hex convert-to string","@context":"https://schema.org"}</script>
<!-- End LozyeFramework.WebEngine SEO tag -->
	<link href="https://lozye.github.io/assets/css/web.all.css?v=132484243179996977" rel="stylesheet" />

	<!--[if lt IE 9]>
	<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
	<![endif]-->

</head>

<body>
	<div class="x-wapper">
		<div class="x-site">
			<div class="x-site-top"></div>
			<div class="x-site-mid"></div>
			<div class="x-site-footer">
				<p class="x-site-title"><a href="https://lozye.github.io/index.html?v=132484243179996977">Lozye</a></p>
				<p class="x-site-slogan"><a>身处黑夜，心向黎明！</a></p>
				<p class="x-site-slogan"><a href="https://lozye.github.io/list.html?v=132484243179996977">全部文章</a></p>
			</div>
			<div class="x-site-hidden">
				<p><a href="http://www.beian.miit.gov.cn/" target="_blank"></a></p>
				<p></p>
			</div>
		</div>
		<div class="x-main">
			<div class="x-container">
				<div class="x-box grid-box">
					<div class="grid-box x-box-header">
						<div class="x-box-title grid-box">HEX Convert</div>
						<div class="x-box-date grid-box">2018-09-12</div>
					</div>
					<div class="grid-box x-box-markdown markdown-body"> <h2 id="0x1-摘要">0X1 摘要</h2>
<p>string convert-to hex and hex convert-to string</p>
<h2 id="0x2-why">0X2 WHY</h2>
<ul>
<li>Base64中存在不安全的字符<code>+</code>,<code>=</code>,<code>/</code></li>
<li>那么有没有一种只由字母和数字构成的密文方式呢</li>
<li>缺点 <strong>字节数由1.5倍变成2倍</strong></li>
</ul>
<h2 id="0x3-源">0X3 源</h2>
<blockquote>
<p>反射mscorlib 下System.BitConverter类</p>
</blockquote>
<pre><code class="language-c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> <span class="hljs-title">GetHexValue</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> i</span>)</span>
{
    <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">10</span>)
    {
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">char</span>)(i + <span class="hljs-number">48</span>);
    }
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">char</span>)(i - <span class="hljs-number">10</span> + <span class="hljs-number">65</span>);
}
<span class="hljs-comment"><span class="hljs-doctag">///</span><span class="hljs-doctag">&lt;summary&gt;</span>将字节的指定子数组的每个元素的数值转换为其等效的十六进制字符串表示形式<span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">ToString</span>(<span class="hljs-params"><span class="hljs-keyword">byte</span>[] <span class="hljs-keyword">value</span>, <span class="hljs-keyword">int</span> startIndex, <span class="hljs-keyword">int</span> length</span>)</span>
{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> == <span class="hljs-literal">null</span>)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-string">&quot;value&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (startIndex &lt; <span class="hljs-number">0</span> || (startIndex &gt;= <span class="hljs-keyword">value</span>.Length &amp;&amp; startIndex &gt; <span class="hljs-number">0</span>))
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentOutOfRangeException(<span class="hljs-string">&quot;startIndex&quot;</span>, Environment.GetResourceString(<span class="hljs-string">&quot;ArgumentOutOfRange_StartIndex&quot;</span>));
    }
    <span class="hljs-keyword">if</span> (length &lt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentOutOfRangeException(<span class="hljs-string">&quot;length&quot;</span>, Environment.GetResourceString(<span class="hljs-string">&quot;ArgumentOutOfRange_GenericPositive&quot;</span>));
    }
    <span class="hljs-keyword">if</span> (startIndex &gt; <span class="hljs-keyword">value</span>.Length - length)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(Environment.GetResourceString(<span class="hljs-string">&quot;Arg_ArrayPlusOffTooSmall&quot;</span>));
    }
    <span class="hljs-keyword">if</span> (length == <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">string</span>.Empty;
    }
    <span class="hljs-keyword">if</span> (length &gt; <span class="hljs-number">715827882</span>)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentOutOfRangeException(<span class="hljs-string">&quot;length&quot;</span>, Environment.GetResourceString(<span class="hljs-string">&quot;ArgumentOutOfRange_LengthTooLarge&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-keyword">object</span>[]
        {
            <span class="hljs-number">715827882</span>
        }));
    }
    <span class="hljs-keyword">int</span> num = length * <span class="hljs-number">3</span>;
    <span class="hljs-keyword">char</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[num];
    <span class="hljs-keyword">int</span> num2 = startIndex;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i += <span class="hljs-number">3</span>)
    {
        <span class="hljs-keyword">byte</span> b = <span class="hljs-keyword">value</span>[num2++];
        array[i] = BitConverter.GetHexValue((<span class="hljs-keyword">int</span>)(b / <span class="hljs-number">16</span>));
        array[i + <span class="hljs-number">1</span>] = BitConverter.GetHexValue((<span class="hljs-keyword">int</span>)(b % <span class="hljs-number">16</span>));
        array[i + <span class="hljs-number">2</span>] = <span class="hljs-string">&#x27;-&#x27;</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>(array, <span class="hljs-number">0</span>, array.Length - <span class="hljs-number">1</span>);
}</code></pre>
<h2 id="0x4-改造">0X4 改造</h2>
<pre><code class="language-c#"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> _hexValue(<span class="hljs-keyword">int</span> i) =&gt; (i &lt; <span class="hljs-number">10</span>) ? (<span class="hljs-keyword">char</span>)(i + <span class="hljs-number">48</span>) : (<span class="hljs-keyword">char</span>)(i + <span class="hljs-number">55</span>);

<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span>转为HEXstring<span class="hljs-doctag">&lt;/summary&gt;</span>  </span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">HexFormat</span>(<span class="hljs-params"><span class="hljs-keyword">byte</span>[] input</span>)</span>
{
    <span class="hljs-keyword">int</span> num = input.Length &lt;&lt; <span class="hljs-number">1</span>;
    <span class="hljs-keyword">char</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[num];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i += <span class="hljs-number">2</span>)
    {
        <span class="hljs-keyword">byte</span> temp = input[i &gt;&gt; <span class="hljs-number">1</span>];
        array[i] = _hexValue(temp &gt;&gt; <span class="hljs-number">4</span>);
        array[i + <span class="hljs-number">1</span>] = _hexValue(temp &amp; <span class="hljs-number">15</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>(array);
}

<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span>从HEXstring转为字节<span class="hljs-doctag">&lt;/summary&gt;</span>  </span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">byte</span>[] <span class="hljs-title">HexFormat</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> input</span>)</span>
{
    <span class="hljs-keyword">var</span> length = input.Length;
    <span class="hljs-keyword">if</span> ((length &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">&quot;format error&quot;</span>);
    <span class="hljs-keyword">byte</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[length &gt;&gt; <span class="hljs-number">1</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; result.Length; i++)
        result[i] = <span class="hljs-keyword">byte</span>.Parse(input.Substring(i &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>), System.Globalization.NumberStyles.AllowHexSpecifier);
    <span class="hljs-keyword">return</span> result;
}</code></pre>
 </div>
					<div class="grid-box x-box-footer">
						<div class="x-box-line">
							<div class="grid-box x-box-left">
								<ul>
									
									<li><a href="https://lozye.github.io/list.html#c#?v=132484243179996977">c#</a> </li>
									
									<li><a href="https://lozye.github.io/list.html#hex?v=132484243179996977">hex</a> </li>
									
								</ul>
								&nbsp;
							</div>
							<div class="grid-box x-box-right">
								<a href="https://lozye.github.io/list.html?v=132484243179996977">BACK</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="x-footer">
				<div class="x-footer-msg x-noselect grid-box">
					<ul>
						<li>
							<span>
								product by
								<a href="https://github.com/lozye" target="_blank">@Lozye</a>
							</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="x-hidden"></div>
	</div>
	
</body>

</html>